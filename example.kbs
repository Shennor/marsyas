ТИП тип_тестирования
СИМВОЛ
"smoke"
"bench"
"stress"
"tail"
"hand"
КОММЕНТАРИЙ Определяют списки тестирования и отдельные тесты

ТИП тип_архитектура_процессора
СИМВОЛ
"E1C"
"E2S"
"E2C3"
"E8C"
"E8C2"
"E16C"
КОММЕНТАРИЙ Определяет архитектуру процессора на машине

ТИП тип_имя_машины
СИМВОЛ
"poweroff"
"reboot"

ТИП тип_ядро
СИМВОЛ
"6.1.0-1.3"

ТИП тип_статус_теста
СИМВОЛ
"FAIL"
"PASS"
"SKIP"

ТИП тип_причина
СИМВОЛ
"Ошибка драйвера видеокарты"
"Неправильная конфигурация JVM машины - выделено недостаточно памяти"
"Переполнение памяти при параллельном запуске тестов"
"Нет"

ТИП тип_рекомендация
СИМВОЛ
"Увеличить размер памяти JVM"
"Перезапустить после исправления проблем с графической подсистемой"
"Оптимизировать настройки GC для высокого потребления памяти"
"Включить сборку мусора и настроить параметры GC"
"Нет"

ТИП тип_да_нет
СИМВОЛ
"Да"
"Нет"

ТИП модель_видеокарты
СИМВОЛ
"Radeon3000"
"Нет"

ТИП тип_количество
ЧИСЛО
ОТ 0
ДО 10000

ТИП тип_состояние
СИМВОЛ
"Нет"
"Ядро несовместимо с драйвером видеокарты"

ТИП тип_использование_памяти
ЧИСЛО
ОТ 0.0
ДО 100.0

ОБЪЕКТ тестирование
ГРУППА тестирование
АТРИБУТЫ
  АТРИБУТ тип
    ТИП тип_тестирования
  АТРИБУТ количество_упавших_тестов_на_графику
    ТИП тип_количество
  АТРИБУТ количество_упавших_тестов_JVM
    ТИП тип_количество
  АТРИБУТ рекомендация
    ТИП тип_рекомендация

ОБЪЕКТ машина
ГРУППА машина
АТРИБУТЫ
  АТРИБУТ графика_нестабильна
    ТИП тип_да_нет
  АТРИБУТ установлена_модель_видеокарты
    ТИП модель_видеокарты
  АТРИБУТ состояние
    ТИП тип_состояние

ОБЪЕКТ тест_ViennaCL
ГРУППА тест
АТРИБУТЫ
  АТРИБУТ статус
    ТИП тип_статус_теста
  АТРИБУТ зависит_от_графики
    ТИП тип_да_нет
  АТРИБУТ причина
    ТИП тип_причина
  АТРИБУТ рекомендация
    ТИП тип_рекомендация
  АТРИБУТ зависит_от_JVM
    ТИП тип_да_нет
    
ОБЪЕКТ тест_ViennaCL_содержит_ошибку_SIGBUSS
ГРУППА факт
АТРИБУТЫ
  АТРИБУТ присутствие
    ТИП тип_да_нет
    

ОБЪЕКТ тест_peak_test
ГРУППА тест
АТРИБУТЫ
  АТРИБУТ статус
    ТИП тип_статус_теста
  АТРИБУТ зависит_от_графики
    ТИП тип_да_нет
  АТРИБУТ причина
    ТИП тип_причина
  АТРИБУТ рекомендация
    ТИП тип_рекомендация
  АТРИБУТ зависит_от_JVM
    ТИП тип_да_нет
  АТРИБУТ среднее_использование_памяти_при_запуске
    ТИП тип_использование_памяти
  АТРИБУТ монопольный_запуск
    ТИП тип_да_нет
    
ОБЪЕКТ тест_dacapo_java11_9
ГРУППА тест
АТРИБУТЫ
  АТРИБУТ статус
    ТИП тип_статус_теста
  АТРИБУТ зависит_от_графики
    ТИП тип_да_нет
  АТРИБУТ причина
    ТИП тип_причина
  АТРИБУТ рекомендация
    ТИП тип_рекомендация
  АТРИБУТ зависит_от_JVM
    ТИП тип_да_нет
  АТРИБУТ среднее_использование_памяти_при_запуске
    ТИП тип_использование_памяти
  АТРИБУТ монопольный_запуск
    ТИП тип_да_нет

ОБЪЕКТ тест_peak_test_содержит_ошибку_OOM
ГРУППА факт
АТРИБУТЫ
  АТРИБУТ присутствие
    ТИП тип_да_нет
    
ОБЪЕКТ тест_dacapo_java11_9_содержит_ошибку_OOM
ГРУППА факт
АТРИБУТЫ
  АТРИБУТ присутствие
    ТИП тип_да_нет

ОБЪЕКТ конфигурация_JVM
ГРУППА конфигурация
АТРИБУТЫ
  АТРИБУТ выделено_памяти_МБ
    ТИП тип_количество
  АТРИБУТ используется_GC
    ТИП тип_да_нет
  АТРИБУТ использование_оптимизации
    ТИП тип_да_нет
  АТРИБУТ рекомендация
    ТИП тип_рекомендация


ПРАВИЛО правило_ViennaCL_SIGBUSS
ЕСЛИ
    тест_ViennaCL.зависит_от_графики = "Да" &
    тест_ViennaCL.статус = "FAIL" &
    тест_ViennaCL_содержит_ошибку_SIGBUSS.присутствие = "Да"
ТО
    тест_ViennaCL.причина = ("Ошибка драйвера видеокарты") УВЕРЕННОСТЬ [70; 100] ТОЧНОСТЬ 0
    машина.графика_нестабильна = ("Да") УВЕРЕННОСТЬ [60; 100] ТОЧНОСТЬ 0
КОММЕНТАРИЙ Если упавший тест ViennaCL зависит от графики, а в журналах обнаружены сообщения, связанные с ошибкой шины, то причина падения теста с уверенностью 70 из 100 - ошибка драйвера видеокарты, а также присутствует уверенность 60 из 100, что графическая система на машине нестабильна.
    
ПРАВИЛО правило_количество_тестов_на_графику
ЕСЛИ
    тестирование.количество_упавших_тестов_на_графику > 6
ТО
    машина.графика_нестабильна = ("Да") УВЕРЕННОСТЬ [90; 100] ТОЧНОСТЬ 0
КОММЕНТАРИЙ Множественные падения графических тестов (больше 6 тестов) с уверенностью 90 из 100 свидетельствуют о нестабильности графической подсистемы.
    
ПРАВИЛО правило_графика_ядро
ЕСЛИ
    машина.графика_нестабильна = "Да" &
    машина.установлена_модель_видеокарты != "Нет"
ТО
    машина.состояние = ("Ядро несовместимо с драйвером видеокарты") УВЕРЕННОСТЬ [30; 50] ТОЧНОСТЬ 0
КОММЕНТАРИЙ Если на машине нестабильна графическая система и установлена видеокарта, с уверенностью 30-50% наблюдается несовместимость ядра и драйвера видеокарты

ПРАВИЛО правило_dacapo_java11_9_JVM_memory
ЕСЛИ
    тест_dacapo_java11_9.статус = "FAIL" &
    тест_dacapo_java11_9.зависит_от_JVM = "Да" &
    тест_dacapo_java11_9_содержит_ошибку_OOM.присутствие = "Да" &
    тестирование.количество_упавших_тестов_JVM < 3
ТО
    тест_dacapo_java11_9.причина = ("Неправильная конфигурация JVM машины - выделено недостаточно памяти") УВЕРЕННОСТЬ [60; 100] ТОЧНОСТЬ 0
    конфигурация_JVM.рекомендация = ("Увеличить размер памяти JVM") УВЕРЕННОСТЬ [90; 100] ТОЧНОСТЬ 0
КОММЕНТАРИЙ Если упавший тест dacapo_java11_9 зависел от виртуальной машины Java, а в журналах присутствуют сообщения о нехватке памяти, но всего тестов с виртуальной машиной Java завершилось с ошибкой меньше 3, то у веренностью 60 из 100 причина падения теста - неправильная конфигурация JVM машины - выделено недостаточно памяти, и для конфигурации JVM рекомендуется увеличить размер памяти с уверенностью 90 из 100 

ПРАВИЛО правило_peak_test_OOM_parallel
ЕСЛИ
    тест_peak_test.статус = "FAIL" &
    тест_peak_test.среднее_использование_памяти_при_запуске > 90 &
    тест_peak_test.монопольный_запуск = "Нет"
ТО 
    тест_peak_test.причина = ("Переполнение памяти при параллельном запуске тестов") УВЕРЕННОСТЬ [60; 100] ТОЧНОСТЬ 0
    тест_peak_test.рекомендация = ("Запускать тест в монопольном режиме или снижать общую нагрузку на систему") УВЕРЕННОСТЬ [70; 100] ТОЧНОСТЬ 0
КОММЕНТАРИЙ Если при запуске упавшего теста peak_test среднее использование памяти больше 90%, а сам запуск не был монопольным, то с уверенностью 60 из 100 причина падения теста в переполнении памяти при параллельном запуске с другими тестами, и с уверенностью 70 из 100 показано запускать тест в монопольном режиме или снизить общую нагрузку на систему.    

ПРАВИЛО правило_JVM_GC_optimization
ЕСЛИ
    тест_dacapo_java11_9.статус = "FAIL" &
    тест_dacapo_java11_9.среднее_использование_памяти_при_запуске > 85.0 &
    тест_dacapo_java11_9_содержит_ошибку_OOM.присутствие = "Да" &
    конфигурация_JVM.используется_GC = "Нет"
ТО
    конфигурация_JVM.рекомендация = ("Включить сборку мусора и настроить параметры GC") УВЕРЕННОСТЬ [80; 100] ТОЧНОСТЬ 0
    тест_dacapo_java11_9.рекомендация = ("Оптимизировать настройки GC для высокого потребления памяти") УВЕРЕННОСТЬ [75; 100] ТОЧНОСТЬ 0
КОММЕНТАРИЙ Если при запуске упавшего теста dacapo_java11_9 среднее использование памяти больше 85% и журналы содержат ошибку нехватки памяти, а в конфигурации виртуальной машины Java не используется сборщик мусора (Garbage Collector), то с уверенностью 80 из 100 рекомендуется включить сборщик мусора в конфигурации виртуальной машины Java, и с уверенностью 75 из 100 рекомендуется для теста оптимизировать настройки сборщика мусора в случаях высокого потребления памяти.

ПРАВИЛО правило_smoke_test_recommendations
ЕСЛИ
    тестирование.тип = "smoke" &
    тест_ViennaCL.статус = "FAIL" &
    тестирование.количество_упавших_тестов_на_графику > 1
ТО
    тестирование.рекомендация = ("Перезапустить после исправления проблем с графической подсистемой") УВЕРЕННОСТЬ [95; 100] ТОЧНОСТЬ 0
    машина.графика_нестабильна = ("Да") УВЕРЕННОСТЬ [90; 100] ТОЧНОСТЬ 0
КОММЕНТАРИЙ Если при дымовом (smoke) тестировании упал тест ViennaCL, и при этом общее количество упавших тестов на графику больше 1, то у веренностью 90 из 100 считать графику на машине нестабильной, а также с уверенностью 95 из 100 для дымового тестирования рекомендовано перезапустить тестирование после исправления проблем с графической подсистемой
